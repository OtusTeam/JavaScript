class: title

## CLI –≤ Node.js
### .oc-blue-4.ri-twitter-fill[] AlexKorzhikov

.photo[
  ![](assets/team/alex-portret.png)
]

.right.bottom[
  ### 17 –∏—é–Ω—è 2020
]

---

class: top white
background-image: url(assets/sound.svg)
.top.icon[![otus main](assets/otus-2.png)]

.sound-top[
  # –ö–∞–∫ –º–µ–Ω—è —Å–ª—ã—à–Ω–æ –∏ –≤–∏–¥–Ω–æ?
]

.sound-bottom[
  ## > –ù–∞–ø–∏—à–∏—Ç–µ –≤ —á–∞—Ç
  ### **+** –µ—Å–ª–∏ –≤—Å–µ —Ö–æ—Ä–æ—à–æ
  ### **‚Äì** –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã c–æ –∑–≤—É–∫–æ–º –∏–ª–∏ —Å –≤–∏–¥–µ–æ
]

---

background-image: linear-gradient(150deg,rgb(142, 81, 208),rgb(174, 132, 207)), url(static/t0.gif)

# –û–±–æ –º–Ω–µ

.right-image[
  ![img](/assets/team/alex-portret.png)
]

<style>
  h3 span {
    vertical-align: -3px;
  }
</style>

### .oc-blue-4.ri-twitter-fill[] `AlexKorzhikov`
### JavaScript, DevOps
### .oc-yellow-9[@ING]
### @Otus

### .oc-red-6.ri-mail-line[] .oc-teal-9.ri-medium-fill[] .ri-github-fill[] **korzio** 


### .center[üëã]

.right-code[
## –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ!
]

---

# CLI –≤ Node.js

<style>
  img[alt=node] { width: 300px;}
  img[alt=oclif] { width: 200px;}
</style>

- –í–≤–µ–¥–µ–Ω–∏–µ
  - –ü–æ—á–µ–º—É CLI?
.right.image[
  ![](assets/npm.png)
]
  - –ü–æ—á–µ–º—É Node.js?
  - –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã, –¥—Ä—É–≥–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

.right-image[
  ![node](assets/icons/trim/node.png)
]
  
- –ü—Ä–∏–º–µ—Ä—ã - npm, git
  - `package.json`
- Hello CLI
- –û–±–∑–æ—Ä —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
  - Commander.js, Inquirer, Vorpal

.right-image[
  ![oclif](assets/oclif.png)
]
  
- CLI —Å `oclif`
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏ –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ–º–∞–Ω–¥—ã, –ø–ª–∞–≥–∏–Ω—ã
  - –ê—Ä–≥—É–º–µ–Ω—Ç—ã –∏ —Ñ–ª–∞–≥–∏, —ç—Ñ—Ñ–µ–∫—Ç—ã

---

# CLIs are back!

<style>
.rect img {
  height: 180px;
}

.rect.width-100 {
  margin-left: -50px;
}
</style>

### **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, Command Line Interface, CLI**
### –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –≤–≤–æ–¥–∞ –≤—ã–≤–æ–¥–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏–ª–∏ –∫–æ–º–∞–Ω–¥

.rect.width-100.height-33[

.hline.gray.width-90.relative-layout.top-23[
]
.rect.width-23[
.circle.blue.border.width-10[]

**1960**
![](assets/console.png)
]
.rect.width-23[
.circle.green.border.width-16[]

**1990**  
![](assets/windows-console.png)
]
.rect.width-23[
.circle.blue.border.width-10[]

**2010**
![](assets/google-cloud-console.png)
]
]

---

# –ü–æ—á–µ–º—É?

### –ö–∞–∫–∞—è CLI –ø—Ä–æ–≥—Ä–∞–º–º–∞
- –í–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è?
- –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?
- –ü–æ—á–µ–º—É Node.js?

.center[
  ![question](assets/question.png)
]

---

# –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ CLI

.right-code[
- `cd, ls, curl`
- `ps, htop`
- `node, tsc, go`
]

- `git`
- `docker`
- `kubectl`

.right-code[![NPM](assets/icons/trim/npm.png)]

- `npm`

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–æ–µ–∫—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

.right-code[
- `yeoman`
- `webpack`
- `gulp, grunt`
]

- `create-react-app`
- `angular-cli`
- `vue-cli`

---

# –ü–æ—á–µ–º—É CLI?

### .green[`+`]

- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** 
  - –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∏
  - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã 
  - —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤,
- *–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ—Å—Ç–∏—á—å –±–æ–ª—å—à–µ–≥–æ!*
- *It's fun!*

### .red[`-`]?

---

# –ü–æ—á–µ–º—É Node.js?

### .green[`+`]

- –ü–æ–ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è —Å `JavaScript`
- [–ü—Ä–∏–Ω—Ü–∏–ø –≠—Ç–≤—É–¥–∞](https://blog.codinghorror.com/the-principle-of-least-power/) - *–õ—é–±–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ JavaScript, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –±—É–¥–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ JavaScript*
- –ë—ã—Å—Ç—Ä–∞—è –∏ –ø—Ä–æ—Å—Ç–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –≥–æ—Ç–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫, –±–æ–≥–∞—Ç–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `npm` 
- –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- –õ—É—á—à–µ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

.hidden[
- We build for Fronted developers, they have node installed already
]

### .red[`-`]?

---

# –ü—Ä–∏–Ω—Ü–∏–ø—ã

.right-image[![question](assets/question_ru.png)]

### –ö–∞–∫–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞ `CLI` –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤—ã –∑–Ω–∞–µ—Ç–µ?

```bash
npx cowsay hello cow
 ___________
< hello cow >
 -----------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
```

---

# –ü—Ä–∏–Ω—Ü–∏–ø—ã

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
  - `help`
  - `version`
  - `logs, messages, errors`
  
.right-image[![kiss](assets/kiss.png)]

- [–§–∏–ª–æ—Å–æ—Ñ–∏—è UNIX](https://ru.wikipedia.org/wiki/%D0%A4%D0%B8%D0%BB%D0%BE%D1%81%D0%BE%D1%84%D0%B8%D1%8F_Unix)
  - `–ü—É—Å—Ç—å –∫–∞–∂–¥–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–µ–ª–∞–µ—Ç —á—Ç–æ-—Ç–æ –æ–¥–Ω–æ, –Ω–æ —Ö–æ—Ä–æ—à–æ`
  - `KISS`
  - `–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, –∫–æ–º–ø–æ–∑–∏—Ü–∏—è`

- –†–∞–±–æ—á–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
  - `linux, mac os, windows`
  - `package`

---

class: title

## .center[Q&A]
### .center[Introduction --> Hello CLI]

---

# Hello CLI

## Demo

```bash
mkdir my-test-cli
npm init
echo "console.log('Hello CLI')" > index.js
npm start
npm install --global .
my-test-cli
```

---

# package.json

```json
{
  "name": "my-test-cli",
  "version": "1.0.0",
  "description": "Hello CLI",
  "main": "server.js",
  "bin": "server.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "man" : "./man/doc.1"
}
```

- `main` - —ç–∫—Å–ø–æ—Ä—Ç
- `bin` - —Å–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π `symlink` –≤ `PATH`, `./node_modules/.bin/`
- `url` - [`npm bugs`](https://docs.npmjs.com/files/package.json#bugs) - —Å–æ–æ–±—â–∏—Ç—å –∫—É–¥–∞ —Å–ª–µ–¥—É–µ—Ç ü§ó

---

# –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ò—Å–ø–æ–ª–Ω–µ–Ω–∏—è

- `shebang` –ø–æ–≤–∑–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –≤ `*nix`

```js
#!/usr/bin/env node
```

> –¥–ª—è `windows` [cmd-shim](https://github.com/npm/cmd-shim#readme) 

- `process.argv` –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–µ

–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã `server.js`?

```javascript
console.log(process.argv)
```

```bash
node server hello world
```

- [`repl`](https://nodejs.org/api/repl.html) –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

---

# help & version

## Demo

```bash
> my-test-cli

Usage: 
--help    Help documentation
--version Installed package version
```

---

# Commander.js

```javascript
var program = require('commander');

program
  .version('0.1.0')
  .option('-p, --peppers', 'Add peppers')
  .option('-P, --pineapple', 'Add pineapple')
  .option('-b, --bbq-sauce', 'Add bbq sauce')
  .parse(process.argv);

console.log('you ordered a pizza with:');
if (program.peppers) console.log('  - peppers');
if (program.pineapple) console.log('  - pineapple');
if (program.bbqSauce) console.log('  - bbq');
console.log('  - %s cheese', program.cheese);
```

- –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

---

# Inquirer

### –°—Ç–∏–ª—å–Ω—ã–π –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

![Inquirer DEMO Gif](https://github.com/mokkabonna/inquirer-autocomplete-prompt/raw/master/inquirer.gif)

#### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- `cli-ux`
- `prompt`
- `enquirer`

---

# Vorpal

#### https://vorpal.js.org/ <br><br>

.right-code[
- –ù–µ–ø—Ä–µ—Ä–≤–Ω—ã–π CLI
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
]

.half-image[
  ![vorpal](assets/vorpal_help.jpg) <br><br>
  ![daffy](assets/daffy_opt.gif)
]

https://www.telerik.com/blogs/creating-node-js-command-line-utilities-improve-workflow

---

# .half-image[ [![node](assets/oclif.png)](https://oclif.io/) ]

- Framework –æ—Ç *Heroku, SalesForce* –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è CLI
- `TypeScript`
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
- –•—É–∫–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

```bash
$ npx oclif single mynewcli
? npm package name (mynewcli): mynewcli
$ cd mynewcli
$ ./bin/run
hello world from ./src/index.js!
```

---

# Demo oclif + TypeScript = watch

- Add [`--watch` flag](https://nodejs.org/docs/latest/api/fs.html#fs_fs_watch_filename_options_listener)
- Transpile TypeScript

### **!Important! Deprecated**
### Define interpreter for other file extensions

```js
const oldHook = require.extensions['.js']
const tsc = require('typescript')

require.extensions['.ts'] = function (module, file) {
  const oldCompile = module._compile
  module._compile = function (code, file) {
    code = tsc.transpileModule(code, { compilerOptions: {} }).outputText + '; console.log("barhook:", bar)'
    module._compile = oldCompile
    module._compile(code, file)
  }
  oldHook(module, file)
}

require('./ts.ts')
```

.hidden[
> the TypeScript Node (ts-node)‚Ää-‚Ääthe on-the-fly module extension and REPL for Node.
https://github.com/microsoft/TypeScript/wiki/Using-the-Compiler-API
]

---

# –î—Ä—É–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- `chalk` —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã–π –≤—ã–≤–æ–¥
- `clui` –≤—ã–≤–æ–¥ —Ç–∞–±–ª–∏—Ü, —Å—Ç–∞—Ç—É—Å, –≥—Ä–∞—Ñ–∏–∫–∏
- `progress` —Å—Ç–∞—Ç—É—Å
- `cli-table` —Ç–∞–±–ª–∏—Ü–∞
- `figlet` ASCII –≤—ã–≤–æ–¥
- `clear` –ø–æ—á–∏—Å—Ç–∏—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª
- `cli-ux` oclif —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –≤–≤–æ–¥–∞ –∏ –≤—ã–≤–æ–¥–∞
- [Gluegun](https://github.com/infinitered/gluegun)

---

# Docs

- [Evolution of the Heroku CLI: 2008-2017](https://blog.heroku.com/evolution-of-heroku-cli-2008-2017)

- [12 Factor CLI Apps - Heroku](https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46)

- [Building Great CLI Experiences in Node.js - Jeff Dickey, Heroku](https://www.youtube.com/watch?v=Izx3-KSuaM8)

- [Build a JavaScript Command Line Interface (CLI) with Node.js ‚Äî SitePoint](https://www.sitepoint.com/javascript-command-line-interface-cli-node-js/)

- [My CLI Stories](https://medium.com/@korzio) 

- [Full CLI In TypeScript Online Workshop](http://cli-in-ts.dev/)

### –ù–∞ –∑–∞–Ω—è—Ç–∏–∏

- –†–∞–∑–æ–±—Ä–∞–ª–∏ –±–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ CLI —Å `Node.js`
- –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫

---

class: title

## .center[Q&A --> –û –ö—É—Ä—Å–µ]

---

background-image: linear-gradient(150deg,rgb(142, 81, 208),rgb(174, 132, 207)), url(static/t0.gif)

class: profile
# –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏+

- **–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö–æ—Ä–∂–∏–∫–æ–≤**

JavaScript @ Alpari, Comindware, Tinkoff, Backbase, ING  
korzio@gmail.com https://github.com/korzio
  
- **–Æ—Ä–∏–π –î–≤–æ—Ä–∂–µ—Ü–∫–∏–π**

Java, JavaScript @ Luxoft  
Teaching @ 1500+ hours, 600+ developers

- **–ú–∏—Ö–∞–∏–ª –ö—É–∑–Ω–µ—Ü–æ–≤**

FullStack @ ING
https://github.com/shershen08

- **–ù–∏–∫–∏—Ç–∞ –û–≤—á–∏–Ω–Ω–∏–∫–æ–≤** 

EPAM Systems, Skywind Group 

- **–ù–∞—Å –±–æ–ª—å—à–µ!**

---

# Modern JavaScript Frameworks

| ![JS](assets/icons/trim/js.png) | ![Web Components](assets/icons/trim/webcomponents.png) | ![Node](assets/icons/trim/node.png) | ![Vue](assets/icons/trim/vue.png) | ![React](assets/icons/trim/react.png) | ![Angular](assets/icons/trim/angular.png) |
|:-------------:|:-------------:|:-------------:|:-------------:|:-------------:|:-------------:|
| ![Google Chrome](assets/icons/trim/google_chrome.png) | ![ts](assets/icons/trim/ts.png) | ![v8](assets/icons/trim/v8.png) | | ![redux](assets/icons/trim/redux.png) | ![rxjs](assets/icons/trim/rxjs.png) |
| ![NPM](assets/icons/trim/npm.png) | ![svelte](assets/svelte.png) | ![Express](assets/icons/trim/express.png) | | ![react-router](assets/icons/trim/react-router.png) | |
|  | ![polymer](assets/icons/trim/polymer.png) | ![GraphQL](assets/icons/trim/graphql.png) |

---

class: title

## .center[Q&A –û –ö—É—Ä—Å–µ]

---

class: title

.right.bottom[
  ### 17 –∏—é–Ω—è 2020
]

## –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ!
### –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–π–¥–∏—Ç–µ [–æ–ø—Ä–æ—Å](https://otus.pw/ZlEl/)
