.center.icon[![otus main](assets/otus-1.png)]

---

class: white
background-image: url(assets/title.svg)
.top.icon[![otus main](assets/otus-2.png)]

# Modern JavaScript Frameworks
## –í—Å–µ —Å—É—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
### –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö–æ—Ä–∂–∏–∫–æ–≤

---

class: top white
background-image: url(assets/sound.svg)
.top.icon[![otus main](assets/otus-2.png)]

.sound-top[
  # –ö–∞–∫ –º–µ–Ω—è —Å–ª—ã—à–Ω–æ –∏ –≤–∏–¥–Ω–æ?
]

.sound-bottom[
  ## > –ù–∞–ø–∏—à–∏—Ç–µ –≤ —á–∞—Ç
  ### **+** –µ—Å–ª–∏ –≤—Å–µ —Ö–æ—Ä–æ—à–æ
  ### **‚Äì** –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã c–æ –∑–≤—É–∫–æ–º –∏–ª–∏ —Å –≤–∏–¥–µ–æ
]

---

# –¢–µ–º—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∑–∞–Ω—è—Ç–∏—è

| ![Node](assets/icons/trim/node.png) | ![JS](assets/icons/trim/js.png) | ![Google Chrome](assets/icons/trim/google_chrome.png) |
|:-----------:|:-----------:|:-----------:|
| Node Summary | DOM API | DevTools |
|  | Events |  |

---

# –¢–µ–º—ã

.right-image[
  ![Web Components](assets/icons/trim/webcomponents.png)
]

- Custom Elements
- Specification
- Standalone Elements
- Built-in Elements
- LifeCycle Hooks

### –¶–µ–ª–∏

- –ü–æ–Ω–∏–º–∞—Ç—å –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –≤–µ–± —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π `Custom Elements`

---

# Docs

- [WHATWG Specification](https://html.spec.whatwg.org/multipage/custom-elements.html)

- [Polymer Guide](https://www.polymer-project.org/3.0/docs/devguide/custom-elements)

- [A short introduction to Web Components](https://github.com/ruphin/webcomponents)

- [Google I/O 2014 - Polymer and Web Components change everything you know about Web development](https://www.youtube.com/watch?v=8OJ7ih8EE7s)

---

# Chrome DevTools - Demo

.right-image[![chrome devtools](assets/chrome-devtools-screen.png)]

- Console
- Sources
- Network
- Application
- Device Mode
- ...

---

# Console Tricks

.right-image[![chrome console](assets/console-save-as-half.png)]

- debugger
- $0
- [$0]
- copy
- table
- Copy > Copy as cURL
- ...?

---

# –ó–∞–¥–∞—á–∞

### –ö–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ?

### http://output.jsbin.com/feloni/3/quiet 

.center[![question](assets/question.png)]

---

# Custom Elements

### "Custom elements provide a way for authors to build their own fully-featured DOM elements"

### "A custom element is an element that is custom" ü§î
 
¬© WHATWG

---

# –í—Å–µ —Å—É—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ù–∞–ø—Ä–∏–º–µ—Ä, select, input & form

```html
<select>
<option value="1">7</option>
</select>
```

### –ß—Ç–æ –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–µ–Ω multi-select?

```html
<multi-select>
  <option value="1">8</option>
  <option value="2">13</option>
</multi-select>
```

---

# –ü—Ä–∏–º–µ—Ä 1

```html
<script>
class HelloWorldElement extends HTMLElement {
  connectedCallback() {
    this.textContent = "Hello World"
  }
}
customElements.define('hello-world-element', HelloWorldElement);
</script>
```

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

---

# –ü—Ä–∏–º–µ—Ä 2

```
class FlagIcon extends HTMLElement {
  constructor() {
    super();
    this._countryCode = null;
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this._countryCode = newValue;
  }
  connectedCallback() { /* ... */ }
  get country() {
    return this._countryCode;
  }
  set country(v) {
    this.setAttribute("country", v);
  }
}
```

---

# –î–µ–∫–ª–∞—Ä–∞—Ü–∏—è

```
customElements.define("flag-icon", FlagIcon) 
// [a-z](PCENChar)* '-' (PCENChar)*

// use createElement
const flagIcon = document.createElement("flag-icon")
flagIcon.country = "jp"
document.body.appendChild(flagIcon)

// use new
const flagIcon = new FlagIcon()
flagIcon.country = "jp"
document.body.appendChild(flagIcon)
// use HTML document 
```

---

# –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### –°–æ–∑–¥–∞—Ç—å `hello-component` —ç–ª–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∂–µ—Ç `alert` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

```
class HelloComponent extends HTMLElement { // ?}

// customElements.define ? 

<!-- ? -->
```

### –ö–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —É `display hello-component` —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ `DOM`?

---

# –í–æ–ø—Ä–æ—Å

- –°–ª–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `button`?
- –ß—Ç–æ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?

.center[![question](assets/question.png)]

---

# HTMLElement

```
class HelloComponent extends HTMLElement { }
```

![HTMLElement Hierarchy](assets/HTMLElement_Hierarchy.gif)

---

# Customized Built-in Elements

- reuse && extend - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- extends && is - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ç—Ä–∏–±—É—Ç—ã

```
class PlasticButton extends HTMLButtonElement {
  constructor() {
    super() // ... 
  }
}

customElements.define("plastic-button",
  PlasticButton, { extends: "button" }
)

document.createElement("button", {
  is: "plastic-button"
}) 
```

```html
<button is="plastic-button">Click Me!</button>
```

---

# –î–µ–º–æ

–°–æ–∑–¥–∞—Ç—å custom label –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å—Å—ã–ª–∫–∏

---

# –í–æ–ø—Ä–æ—Å—ã

- –ù–∞–ø–æ–º–∏–Ω–∞–µ—Ç —á—Ç–æ-–Ω–∏–±—É–¥—å?
- –ß—Ç–æ –±—ã –í—ã –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ `customized built-in elements`?
- –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞—Ç—å `custom element` –ø–æ—Å–ª–µ –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è?

---

# (new) Form-Associated Custom Elements

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∑–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ —Ñ–æ—Ä–º

```
class MyControl extends HTMLElement {
    static formAssociated = true;
    // name, disabled, form, readonly
}
```

> Form-associated custom elements supports additional lifecycle callbacks

- `formAssociatedCallback()` - associated || disassociated the element from a form element
- `formDisabledCallback()` - `<fieldset>`'s disabled state
- `formResetCallback()`

.hidden[
  https://docs.google.com/document/d/1JO8puctCSpW-ZYGU8lF-h4FWRIDQNDVexzHoOQ2iQmY/edit?pli=1#
  https://github.com/chromium/chromium/commit/165c8900c953f1bae6f8fb2d0b548ed4f11d4032
]

---

# CustomElementRegistry

.right-image[
  ![Web Components](assets/icons/trim/webcomponents.png)
]

- `window.customElements` - registry instance
- `define()`
- `get()`
- `whenDefined()`
- `upgrade()`

---

# Flow

```html
<example-element></example-element>
```

```
const inDocument = document.querySelector('example-element')
const outOfDocument = document.createElement('example-element')

console.assert(inDocument instanceof HTMLElement)
console.assert(outOfDocument instanceof HTMLElement)

class ExampleElement extends HTMLElement {}
customElements.define('example-element', ExampleElement)

console.assert(inDocument instanceof ExampleElement)
console.assert(!(outOfDocument instanceof ExampleElement))

// upgraded
document.body.appendChild(outOfDocument)
console.assert(outOfDocument instanceof ExampleElement)
```

---

# LifeCycle

.right-image[
  ![Web Components](assets/icons/trim/webcomponents.png)
]

- `constructor` (0)
- `attributeChangedCallback` (1) <= static `observedAttributes()`
- `connectedCallback` (2) - `DOM`
- `disconnectedCallback` (N) - `DOM`
- `adoptedCallback` (?) => "new document"

---

#  Attribute Change

```
class HelloWorldElement extends HTMLElement {
  static get observedAttributes() {
    return ['name']
  }
  attributeChangedCallback(name, oldValue, newValue) {
    this._name = newValue
  }
  connectedCallback() {
    this.name = this.getAttribute('name') || 'World'
  }
  get name() {
    return this._name
  }
  set name(name) {
    this.setAttribute('name', name)
    this.render()
  }
  render() {
    this.textContent = `Hello ${this.name}`
  }
}
```

---

# –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Ö—É–∫–∏ –∏—Å–ø–æ–ª–Ω–∏–ª–∏—Å—å (—Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å–æ–ª–∏ –∏ ...?)

- `connectedCallback`
- `disconnectedCallback`
- `attributeChangedCallback`
- `adoptedCallback`
- `constructor`

---

# Features & Requirements

- `Custom Elements` can be upgraded
- call `super()`
- work to be deferred to `connectedCallback()`
- constructor for state, default values, event listeners & shadow root

---

# –í–æ–ø—Ä–æ—Å

### –ö–∞–∫ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö Custom Elements?

---

# –ù–∞ –∑–∞–Ω—è—Ç–∏–∏

- –ü–æ–ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞–ª–∏ `getters / setters`
- –†–∞–∑–æ–±—Ä–∞–ª–∏ –≤–µ–± —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é `Custom Elements`

---

# Modern JavaScript Frameworks

.mario.mario-10[![mario](assets/mario.png)]

| ![JS](assets/icons/trim/js.png) | ![Node](assets/icons/trim/node.png) | ![Web Components](assets/icons/trim/webcomponents.png) | ![React](assets/icons/trim/react.png) | ![Vue](assets/icons/trim/vue.png) | ![Angular](assets/icons/trim/angular.png) |
|:-------------:|:-------------:|:-------------:|:-------------:|:-------------:|:-------------:|
| ![Google Chrome](assets/icons/trim/google_chrome.png) | ![NPM](assets/icons/trim/npm.png) | ![polymer](assets/icons/trim/polymer.png) | ![redux](assets/icons/trim/redux.png) | | ![ts](assets/icons/trim/ts.png) |
| | ![v8](assets/icons/trim/v8.png) | | ![react-router](assets/icons/trim/react-router.png) | | ![rxjs](assets/icons/trim/rxjs.png) |
| | ![Express](assets/icons/trim/express.png) | |
| | ![GraphQL](assets/icons/trim/graphql.png) | |

---

# –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

![no homework](assets/no-homework.png)

---

class: white
background-image: url(assets/title.svg)
.top.icon[![otus main](assets/otus-2.png)]

# –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ!

### –í—ã –≤–µ—Ä–∏—Ç–µ –≤ Web Components?

.black[ 
### –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–π–¥–∏—Ç–µ –æ–ø—Ä–æ—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ 
]

